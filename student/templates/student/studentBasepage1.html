<!DOCTYPE html>
<html lang="en">

{% load staticfiles %}
{% load tz %}
{% load string_operations %}


<head>

	<!-- start: Meta -->
	<meta charset="utf-8">
	<title>QUIZIT</title>
	<meta name="description" content="Bootstrap Metro Dashboard">
	<meta name="author" content="Dennis Ji">
	<meta name="keyword" content="Metro, Metro UI, Dashboard, Bootstrap, Admin, Template, Theme, Responsive, Fluid, Retina">
	<!-- end: Meta -->

	<!-- start: Mobile Specific -->
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!-- end: Mobile Specific -->

	<!-- start: CSS -->
	<link href="{% static "account/css/jquery-ui.css" %}" rel="stylesheet">
	<link href="{% static "account/css/jquery-ui.min.css" %}" rel="stylesheet"> 
	
	<link id="bootstrap-style" href="{% static "account/css/bootstrap.min.css" %}" rel="stylesheet">
	<link href="{% static "account/css/bootstrap-responsive.min.css" %}" rel="stylesheet">
	<link id="base-style" href="{% static "account/css/style.css" %}" rel="stylesheet">
<!--	<link href="{% static "account/css/pikaday.css" %}" rel="stylesheet">
	<link href="{% static "account/css/site.css" %}" rel="stylesheet">  -->
<!--	<link href="{% static "account/css/bootstrap-datepicker3.standalone.css" %}" rel="stylesheet"> -->
	
	
	<link id="base-style-responsive" href="{% static "account/css/style-responsive.css" %}" rel="stylesheet">
<!--	<link href="{% static "account/css/jquery.uidatepicker.min.css" %}" rel="stylesheet">
	<link href="{% static "account/css/jquery.ui.datepicker.css" %}" rel="stylesheet"> -->
	
	<!-- end: CSS -->
    <style type="text/css">

		.dateGreen a {
		    background-color: #43B5AD !important;
		    background-image :none !important;
		    color: #ffffff !important;
		}

		.dateRed a {
		    background-color: #E25A59 !important;
		    background-image :none !important;
		    color: #ffffff !important;
		}

		.dateOrange a {
		    background-color: #DEB948 !important;
		    background-image :none !important;
		    color: #ffffff !important;
		}
		
		.dateGrey a {
		    background-color: #e6e6e6 !important;
		    background-image :none !important;
		    color: #ffffff !important;
		}
		
		span.ui-datepicker{
			font-size: x-small;
		}
		#calander-wrapper{
			position: fixed;
			overflow: visible;
			padding: 2em;
			left: 0%;
			transform: translateX('-10%');
		}
	.dropdown-menu table{
		width: 80%;
		font-size: x-small;
	}
	
	div.ui-datepicker{
		font-size: 10px;
		width: auto;
	    z-index: 1151 !important;
	    align-self: center;
		overflow: visible;
		left: 5%;
		transform: translateX('-5%');
	}
	  .tooltip > .tooltip-inner {
      background-color: #0915bc; 
      color: #FFFFFF; 
      border: 2px solid blue; 
      padding: 15px;
      font-size: 18px;
  }
  /* Tooltip on top */
  
  /* Tooltip on right */
  .tooltip.bottom > .tooltip-arrow {
      border-right: 5px solid blue;
  }
  ::-webkit-scrollbar {
  -webkit-appearance: none;
  width: 7px;
}
::-webkit-scrollbar-thumb {
  border-radius: 4px;
  background-color: rgba(0, 0, 0, .5);
  -webkit-box-shadow: 0 0 1px rgba(255, 255, 255, .5);
}
	
	</style>

	{% block css_top %} 
	{% endblock %}

	<!-- start: JavaScript-->

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
	<script src="http://d3js.org/d3.v3.min.js"></script>
<script src="http://labratrevenge.com/d3-tip/javascripts/d3.tip.v0.6.3.js"></script>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
	

<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.11.2/moment.min.js"></script>

<script src="{% static "account/js/moment.js" %}"></script>  
	<script src="{% static "account/js/jquery-1.10.2.js" %}"></script>
<script src="{% static "account/js/jquery-ui.js" %}"></script>
	<script src="{% static "account/js/d3.js" %}"></script>
	<script src="{% static "account/js/d3.min.js" %}"></script>
<!--	<script src="{% static "account/js/jquery-1.9.1.min.js" %}"></script> 
	<script src="{% static "account/js/jquery-ui.min.js" %}"></script> -->
	<script src="{% static "account/js/jquery-migrate-1.0.0.min.js" %}"></script>  
<!--	<script src="{% static "account/js/jquery-ui-1.10.0.custom.min.js" %}"></script> -->
	<script src="{% static "account/js/jquery.ui.touch-punch.js" %}"></script>
	<script src="{% static "account/js/modernizr.js" %}"></script>
	<script src="{% static "account/js/bootstrap.min.js" %}"></script>
	<script src="{% static "account/js/jquery.cookie.js" %}"></script>
	<script src="{% static "account/js/fullcalendar.min.js" %}"></script>
	<script src="{% static "account/js/jquery.dataTables.min.js" %}"></script>
	<script src="{% static "account/js/excanvas.js" %}"></script>
	<script src="{% static "account/js/jquery.flot.js" %}"></script>
	<script src="{% static "account/js/jquery.flot.pie.js" %}"></script>
	<script src="{% static "account/js/jquery.flot.stack.js" %}"></script>
	<script src="{% static "account/js/jquery.flot.resize.min.js" %}"></script>
	<script src="{% static "account/js/jquery.chosen.min.js" %}"></script>
	<script src="{% static "account/js/jquery.uniform.min.js" %}"></script>
	<script src="{% static "account/js/jquery.cleditor.min.js" %}"></script>
	<script src="{% static "account/js/jquery.noty.js" %}"></script>
	<script src="{% static "account/js/jquery.elfinder.min.js" %}"></script>
	<script src="{% static "account/js/jquery.raty.min.js" %}"></script>
	<script src="{% static "account/js/jquery.iphone.toggle.js" %}"></script>
	<script src="{% static "account/js/jquery.uploadify-3.1.min.js" %}"></script>
	<script src="{% static "account/js/jquery.gritter.min.js" %}"></script>
	<script src="{% static "account/js/jquery.imagesloaded.js" %}"></script>
	
	
	<script src="{% static "account/js/jquery.masonry.min.js" %}"></script>
	<script src="{% static "account/js/jquery.knob.modified.js" %}"></script>
	<script src="{% static "account/js/jquery.sparkline.min.js" %}"></script>
	<script src="{% static "account/js/counter.js" %}"></script>
	<script src="{% static "account/js/retina.js" %}"></script>
	<script src="{% static "account/js/custom.js" %}"></script>
	<script src="{% static "account/js/date.js" %}"></script>

	
	<!--
	<script src="{% static "account/js/jquery-1.10.2.js" %}"></script> -->

<script type="text/javascript">
	count = 0;
</script>
	<script type="text/javascript">
		$(document).ready( function(){
			
			$(function () {
  $('[data-toggle="tooltip2"]').tooltip('show');
  setTimeout(function(){ 
       $("[data-toggle='tooltip2']").tooltip('hide');}, 1500); 
});
			
		/*	$(".list_id").click(function(){
			var list_date = new Date();
			//window.alert(list_date);
			});
			$(".submit_id").click(function(){
			var submit_date = new Date();
			//window.alert(submit_date);
			});
		
		$(".view_id").click(function(){
			var view_date = new Date();
			//window.alert(count);
			});
		$(".retry_id").click(function(){
			var retry_date = new Date();
			//window.alert(retry_date);
			});
		$(".today_id").click(function(){
			var today_date = new Date();
			//window.alert(today_date);
			});
		$(".dash_id").click(function(){
			var dash_date = new Date();
			//window.alert(dash_date);
			});
		$("#perform_button").click(function(){
			window.location.href = "{% url 'student:studentDashboard' %}";
		});
	
	$("#Dashboard_id").click(function(){
		var date = new Date();
		//window.alert(date);
		});    */
	
    	// Formatting the calendar
		
	if({{eventData|safe}} != null){
        
        var eventData = {{ eventData|safe }};
		
        eventDates = [];
        for(var i = 0; i<eventData.dates.length; i++){
            var dateObj = ((eventData.dates[i].date).replace(/\\\"/g, ''));//.toUTCString();
            //window.alert(eventData.dates[0].date.replace(/\\\"/g, ''));
			
            eventDates[dateObj] = {
                                "date": dateObj, 
                                "questionText" : eventData.dates[i].questionText ,
                                "questionID" : eventData.dates[i].questionID ,
                                "studentID" : eventData.dates[i].studentID ,
                                "answerFlag" : eventData.dates[i].answerFlag ,
                                "numAttempts" : eventData.dates[i].numAttempts ,
                                "numCorrectAttempts" : eventData.dates[i].numCorrectAttempts ,
                                "cssName" : eventData.dates[i].cssName ,
                            };
					
        }
		var minD = ((eventData.dates[0].date.replace(/\\\"/g, '')));
		var minD2 = minD.substring(1,5) + "-" + minD.substring(6,8) + "-" + minD.substring(9,11);
		var minD3 = new Date(Date.parse(minD2));
		
      $('#datepicker').datepicker({
			showAnim: "fadeIn",
            inline: true,
            disabled: false,
			minDate: minD3,
			maxDate: new Date(),
			
			//format: "yyyy-mm-dd",
			
        beforeShowDay: function(d) {
				var date = "\"" + (d.getFullYear() + "-"+ ("0" + (d.getMonth() +1)).slice(-2) + "-" + ("0" + d.getDate()).slice(-2)) + "\"";
                
				eventDate = eventDates[date];
				
                if (eventDate) {
					
                    if (parseInt(eventDate.answerFlag) == 1)
                        return [true, eventDate.cssName.toString(), eventDate.toString()];
                    else
                        return [true, '', ''];
                } else {
                    return [true, '', ''];
                }
				
            },
			
            onSelect: function() {
                // $(this).val() returns the selected date in string. So convert it into date format
                var date1 = new Date(($(this).val()));
				var dateStr = "\"" + (date1.getFullYear() + "-"+ ("0" + (date1.getMonth() +1)).slice(-2) + "-" + ("0" + date1.getDate()).slice(-2)) + "\"";
				var eventDate = eventDates[dateStr];
				var view_date1 = new Date();
				//window.alert(view_date1);
                //$("#questionText").html("Question : "+eventDate.questionText);
                //$("#attemps").html("Correct Attempts : "+eventDate.numCorrectAttempts + "/"+ eventDate.numAttempts);
              //  window.alert(eventDate);
                //$("#reviewButton").click(function(e){
                    var url = "{% url 'student:studentQuestionView1' sid=12345 qid=54321 topAlertFlag=99999 backLocation=2 %}";
                    url = url.replace(/12345/, parseInt(eventDate.studentID));
                    url = url.replace(/54321/, parseInt(eventDate.questionID));
                    window.location.href= url;
                //});
 //$('#ui-datepicker-div').css('clip', 'auto');
		//	$('#ui-datepicker-div').removeClass('ui-helper-hidden-access‌​ible');
			}  }); }
	   else{
	/*	 $( function() {
    $("#datepicker" ).datepicker();
    }); */
	}
	   });
                //console.log("correct attempts: "+parseInt(eventDate.numCorrectAttempts));
                /* if(parseInt(eventDate.numCorrectAttempts)>0){
                        console.log("hi");
                        $("#retryButton").attr("class","btn btn-small btn-warning size");

                        $("#retryButton").click(function(e){
                            var url = "{% url 'student:studentQuestionRetry' sid=12345 qid=54321 topAlertFlag=99999 backLocation=2 %}";
                            url = url.replace(/12345/, parseInt(eventDate.studentID));
                            url = url.replace(/54321/, parseInt(eventDate.questionID));
                            window.location.href= url;
                        });
                }
                else{
                    console.log("hi");
                    $("#retryButton").attr("class","btn btn-small");
                    $("#retryButton").unbind("click");                  
                }

                $("#questionDetails").show();
            },
		});
	/*	
*/



</script>
	


	
	<!-- end: JavaScript-->

	{% block javascript %}
	{% endblock %}

</head>

<body>
	
	<!-- start: Header -->
   <div class="container-fluid-full">
	<div class="row-fluid">
	<div class="navbar">
		<div class="navbar-inner">
			<!-- <div class="container-fluid"> -->
				<a class="btn btn-navbar" data-toggle="collapse" data-target=".top-nav.nav-collapse,.sidebar-nav.nav-collapse">
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</a>
				<a class="brand list_id" href="{% url 'student:studentQuestionList1' %}" ><span>QUIZIT</span></a>

				<!-- start: Header Menu -->
				<div class="nav-no-collapse header-nav">
					<ul class="nav pull-right">

						<!-- start: User Dropdown -->
						<li class="dropdown">
							<a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
								<i class="halflings-icon white user"></i> {{ first_name }}
								<span class="caret"></span>
							</a>
							<ul class="dropdown-menu">
								<li><a href="{% url 'student:viewCourses' %}"><i class="icon-list-alt"></i> Profile</a></li>
								<li><a href="{% url 'account:logout_view' %}"><i class="halflings-icon off"></i> Logout</a></li>
							</ul>
						</li>
						<li>
							<a class="btn" href="{% url 'student:helpPage' %}">
								Help
							</a>
							
						</li>
						
					
						<!-- end: User Dropdown -->
					</ul>
				</div>
				<!-- end: Header Menu -->

			</div>
		</div>
	</div>
    
	

   
    	

   
	<!-- end: Header -->

	<!--	<div class="container-fluid-full" > -->
		<div class="row-fluid" style="z-index: -1 !important;" >
        
			<!-- start: Main Menu -->
			<div id="sidebar-left" class = "span2"  style="position: absolute;" >
				<div class="nav-collapse sidebar-nav" id="datepicker-container' style="position: absolute;">
					<ul class="nav nav-tabs nav-stacked main-menu" style="position: relative;">
					
					<li>
							<a  href="{% url 'student:studentDashboard' %}" id="Dashboard_id" data-toggle="tooltip2" data-placement="right" title="Performance Dashboard" >
								<i class="icon-home"></i>
								<span class="hidden-tablet">Dashboard</span>
							</a>
						</li>
					
						<li><a class="submenu today_id" href="{% url 'student:studentTodaysQuiz1' %}"><i class="icon-bar-chart"></i><span class="hidden-tablet"> Today's Quiz</span></a></li>
						
						<li>
							<a class="submenu list_id" href="{% url 'student:studentQuestionList1' %}">
								<i class="icon-file-alt"></i>
								<span class="hidden-tablet ">Question History</span>
							</a>
						</li>
								
						<li style="list-style: none;margin-top: 17px;">
							<div class="wrapper" style="display: inline;margin-bottom: 10px;">
								<ul>
					<!--	<li style="list-style: none;text-align: center;width: 100%; color: white; margin-bottom: 1em;">Legends</li> -->
						<li class="btn btn-small btn-success" style="display: inline;width: 150px;list-style: none;align-items: center;" >&gt;90%</li>
						<li class="btn btn-small btn-warning" style="display: inline;width: 100px;list-style: none;align-items:center;padding-left: 14px;padding-right: 14px;">70%-90%</li>
						<li class="btn btn-small btn-danger" style="display: inline;width: 150px;list-style: none;align-items: center;">&lt;70%</li>
						<li class="btn btn-small btn-inverse" style="display: inline;width: 100px;list-style: none;align-items: center;">No Attempt</li>
								</ul></div></li>
					<!--	<li style="padding-left: 20px; padding-right: 20px;align-items: center;color: white;list-style: none;width: auto;padding-bottom: 10px; padding-top: 10px;background: grey;align-self: center;">   <span class="hidden-tablet">  Question Navigator</span></li> -->
						<li>
						<div class="wrapper" id="calander-wrapper" >
				<!--		<div class="input-group date" id="datepicker"> -->
			<!--		<input type="text" id="datepicker">			-->
			<div id="datepicker"></div>
							
			<!--		<input type="text" class="datepicker"> -->
						</div>  
			
						</li>
						

					</ul>
				</div>
			</div>
			<!-- end: Main Menu -->

			<!-- start: Content -->
			<div id="content" class="span10">
				<ul class="breadcrumb">
					<li>
						<i class="icon-home"></i>
						<a href="{% url 'student:studentQuestionList1' %}">{{ courseName }}</a>
						<i class="icon-angle-right"></i>
					</li>
					<li>
						<i class="icon-list-alt"></i>
						{% block breadcrumb %}
						{% endblock %}
					</li>
					
				</ul>

				{% block content %}
				{% endblock %}
			</div><!-- End: Content-->
        
		</div><!--End: row-fluid-->
		</div><!--End: container-fluid-full-->



	<footer>
	<p>
		<span style="text-align:left;float:left">
		QUIZIT <small> is one of the CS educational technologies created by <a href="https://sites.google.com/a/asu.edu/csi/">CSI Lab</a> of <a href="http://cidse.engineering.asu.edu/">School of Computing, Informatics & Decision Systems Engineering</a> at <a href="http://www.asu.edu/">Arizona State University</a>
		</small>
		</span>		
	</p>

	</footer>


</body>




{% block javascript_bottom %}

{% endblock %}

</html>
